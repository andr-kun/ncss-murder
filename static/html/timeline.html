<article>
	<h2>Timeline</h2>

	<div id="timeline"></div>
	<script type="text/javascript" src="http://cdn.knightlab.com/libs/timeline/latest/js/storyjs-embed.js"></script>
	<script src="/static/js/loadMurders.js"></script>
	<script>
		function profile_link(player) {
			return '<a href="/{{ game_id }}/profiles/'+player.replace(' ', '+')+'">'+player+'</a>'
		};

		function createTimeline(murders) {
			var timeline = {
				timeline: {
					type: "default",
					date: murders.map(function(murder) {
						return {
							startDate: murder.datetime,
							headline: profile_link(murder.victim) + ' killed by ' + profile_link(murder.murderer),
						};
					}),
				},
			};

			createStoryJS({
				type: 'timeline',
				width: '100%',
				height: '600',
				source: timeline,
				embed_id: 'timeline'
			});
		};

		loadMurders({{ game_id }}, createTimeline);
	</script>
</article>
